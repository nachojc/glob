<div class="branch-wrapper">
    <div class="branch-summary-wrapper" (click)="emitClick()">
        <h6 class="branch-title" *ngIf="isNearestMarker">Nearest result</h6>
        <section class="branch-summary">
            <h6 class="branch-name" style="min-height: 48px;">{{branch.name}}</h6>
            <div class="body-medium" *ngIf="branch.subType?.multi">{{branch.subType?.multi.default}}</div>
        </section>
        <section class="branch-location">
          <p class="branch-address" style="min-height: 72px;">
            {{branch.location.address}}
          </p>
          <div class="branch-directions">
            <button>{{branch.distanceInMiles | number:'0.0-2'}} m</button>
          </div>
        </section>
    <section class="branch-schedule">
      <div class="branch-hours" *ngIf="isBranch && todayHours">
        <div>Branch</div>
        <div>Today, {{todayHours}}</div>
      </div>
      <!-- [ngClass]="{hidden: branch?.atm?.length === 0}" -->
      <div class="atm-hours" *ngIf="!isBranch || (branch.atm && branch.atm[0])">
        <div>ATM</div>
        <div>Free cash withdrawals</div>
      </div>
    </section>
  </div>

  <div class="tab-group-wrapper" [class.hide-tabs]="(isBranch && !(branch.atm?.length > 0)) || !isBranch">
    <sn-tab-group [ngClass]="{both: isBranch && branch?.atm?.length}">
      <sn-tab [label]="isBranch?'Branch':'ATM'" class="tab-branch-info">
        <div class="branch-info-wrapper">
          <sn-option-list >
            <sn-option-item border *ngIf="branch.schedule?.timeToClose">
              <div class="close-warning">
                <div class="Type-5_Light-Style">{{branch.schedule.timeToClose}}</div>
                <div class="signal"></div>
              </div>
            </sn-option-item>
            <sn-option-item border *ngIf="branch.contactData?.phoneNumber">
              <sn-icon color="primary" icon="sn-CHAN025" start align-top></sn-icon>
              <div>
                <div class="Type-5_Regular-Style section-title">Contact number</div>
                <div class="Type-5_Regular-Style">{{branch.contactData.phoneNumber}}</div>
              </div>
              <div right-text>
                <button (click)="contactBranch(branch.contactData.phoneNumber)" class="call-button">Call</button>
              </div>
            </sn-option-item>
            <sn-option-item border *ngIf="branch.schedule?.preview?.length > 0">
              <sn-icon color="primary" icon="sn-DOC022" start align-top></sn-icon>
              <div class="Type-5_Regular-Style section-title">Opening hours</div>
              <div class="Type-5_Regular-Style hours-wrapper" *ngFor="let schedule of branch.schedule.preview">
                <div class="weekdays">
                  <h1 class="title">{{schedule.text}}:</h1>
                </div>
                <div class="hours">
                  <div *ngFor="let workingHour of schedule.hours">{{workingHour}}<br /></div>
                </div>
              </div>
            </sn-option-item>
            <!-- <sn-option-item border>
              <sn-icon color="primary" icon="sn-SYS004" start align-top></sn-icon>
              <div class="Type-5_Regular-Style section-title">Notices and news</div>
              <div class="Type-5_Regular-Style">
                <h1 class="title">Tomorrow closed for works</h1>
                Due to improvements in the facilities we will keep the office closed tomorrow, Tuesday, August 6, 2018.
                <br />
                <br />
                Sorry for the inconvenience
              </div>
            </sn-option-item> -->
            <sn-option-item border *ngIf="branch.attributes?.length > 0 || branch.products?.length > 0">
              <sn-icon color="primary" icon="sn-BAN089" start align-top></sn-icon>
              <div class="Type-5_Regular-Style section-title">Additional services</div>
              <div class="Type-5_Regular-Style" *ngIf="branch.products.length > 0">
                  <h1 class="title">Financial</h1>
                  <ul type="none">
                    <li *ngFor="let attr of branch.products">{{attr}}</li>
                  </ul>
              </div>
              <div class="Type-5_Regular-Style" *ngIf="branch.attributes.length > 0">
                  <h1 class="title">No Financial</h1>
                <ul type="none">
                  <li *ngFor="let attr of branch.attributes">{{attr}}</li>
                </ul>
              </div>
            </sn-option-item>
            <sn-option-item *ngIf="getAccesibility(branch.attrib)">
              <sn-icon color="primary" icon="sn-FUNC094" start align-top></sn-icon>
              <div class="Type-5_Regular-Style section-title">Accessibility</div>
              <h1 class="title">Disabled access</h1>
            </sn-option-item>

          </sn-option-list>
        </div>
      </sn-tab>
        
      <sn-tab label="ATM" class="tab-branch-info" *ngIf="false"> <!--*ngIf="(isBranch && branch.atm && branch.atm[0])"-->
          <div class="branch-info-wrapper">
            <sn-option-list>
              <sn-option-item border *ngIf="branch.atm[0].schedule?.timeToClose">
                <div class="close-warning">
                  <div class="Type-5_Light-Style">{{branch.atm[0].schedule?.timeToClose}}</div>
                  <div class="signal"></div>
                </div>
              </sn-option-item>
              <sn-option-item border *ngIf="branch.atm && branch.atm[0].contactData?.phoneNumber">
                <sn-icon color="primary" icon="sn-CHAN025" start align-top></sn-icon>
                <div>
                  <div class="Type-5_Regular-Style section-title">Contact number</div>
                  <div class="Type-5_Regular-Style">{{branch.atm[0].contactData.phoneNumber}}</div>
                </div>
                <div right-text>
                  <button (click)="contactBranch(branch.atm[0].contactData.phoneNumber)" class="call-button">Call</button>
                </div>
              </sn-option-item>
              <sn-option-item border *ngIf="branch.atm && branch.atm[0].schedule?.preview?.length > 0">
                <sn-icon color="primary" icon="sn-DOC022" start align-top></sn-icon>
                <div class="Type-5_Regular-Style section-title">Opening hours</div>
                <div class="Type-5_Regular-Style hours-wrapper" *ngFor="let schedule of branch.atm[0].schedule.preview">
                  <div class="weekdays">
                    <h1 class="title">{{schedule.text}}:</h1>
                  </div>
                  <div class="hours">
                    <div *ngFor="let workingHour of schedule.hours">{{workingHour}}<br /></div>
                  </div>
                </div>
              </sn-option-item>
              <!-- <sn-option-item border>
                <sn-icon color="primary" icon="sn-SYS004" start align-top></sn-icon>
                <div class="Type-5_Regular-Style section-title">Notices and news</div>
                <div class="Type-5_Regular-Style">
                  <h1 class="title">Tomorrow closed for works</h1>
                  Due to improvements in the facilities we will keep the office closed tomorrow, Tuesday, August 6, 2018.
                  <br />
                  <br />
                  Sorry for the inconvenience
                </div>
              </sn-option-item> -->
              <sn-option-item border *ngIf="branch.atm && (branch.atm[0].attributes?.length > 0 || branch.atm[0].products?.length > 0)">
                <sn-icon color="primary" icon="sn-BAN089" start align-top></sn-icon>
                <div class="Type-5_Regular-Style section-title">Additional services</div>
                <div class="Type-5_Regular-Style" *ngIf="branch.atm[0].products.length > 0">
                  <h1 class="title">Financial</h1>
                  <ul type="none">
                    <li *ngFor="let attr of branch.atm[0].products">{{attr}}</li>
                  </ul>
                </div>
                <div class="Type-5_Regular-Style" *ngIf="branch.atm[0].attributes.length > 0">
                  <h1 class="title">No Financial</h1>
                  <ul type="none">
                    <li *ngFor="let attr of branch.atm[0].attributes">{{attr}}</li>
                  </ul>
                </div>
              </sn-option-item>
              <sn-option-item *ngIf="getAccesibility(branch.atm[0].attrib)">
                <sn-icon color="primary" icon="sn-FUNC094" start align-top></sn-icon>
                <div class="Type-5_Regular-Style section-title">Accessibility</div>
                <h1 class="title">Disabled access</h1>
              </sn-option-item>
  
            </sn-option-list>
          </div>
        </sn-tab>
    </sn-tab-group>
  </div>
</div>
